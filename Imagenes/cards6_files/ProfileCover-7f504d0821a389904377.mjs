(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["ProfileCover"],{"1PLX":function(e,t,o){o.r(t),o.d(t,"ProfileCover",(function(){return ee}));var i=o("q1tI"),n=o("/MKj"),r=o("Ye/N");var s=o("n6mq"),a=o("nKUr");function c({handleAddCoverImageClick:e}){return Object(a.jsx)(s.f,{color:"lightGray",height:369,width:"100%",children:Object(a.jsx)(s.t,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:Object(a.jsx)(s.g,{color:"white",inline:!0,onClick:e,text:r.a._("Add a cover","coverImageEmptyState.buttonText","Button text to add a profile cover image")})})})}var l=o("TgLd");function d({onHide:e,onOpenSelectSource:t}){return Object(a.jsx)(l.b,{accessibilityModalLabel:r.a._("Select profile cover source","Accessibility label for modal to select profile cover source","Accessibility label for modal to select profile cover source"),onDismiss:e,heading:r.a._("Source not found","Header for the error modal that board not found.","Header for the error modal that board not found."),size:"sm",footer:Object(a.jsxs)(s.f,{alignItems:"center",column:12,display:"flex",justifyContent:"end",paddingX:2,children:[Object(a.jsx)(s.f,{flex:"shrink",paddingX:4,children:Object(a.jsx)(s.g,{color:"gray",text:r.a._("Cancel","Button label for cancelling the action to set profile cover pins","Button label for cancelling the action to set profile cover pins"),onClick:e})}),Object(a.jsx)(s.f,{flex:"shrink",children:Object(a.jsx)(s.g,{color:"red",text:r.a._("Select source","Button label for opening the board source picker","Button label for opening the board source picker"),onClick:t})})]}),children:Object(a.jsx)(s.f,{padding:6,children:Object(a.jsx)(s.cb,{children:r.a._("The source of the cover image can't be found. It might be hidden or deleted. Try selecting a new source.","Error message when the board source for tilted pin header not found.","Error message when the board source for tilted pin header not found.")})})})}var u=o("uOCL"),h=o("yl9J"),p=o("c0rk"),b=o("4FwD"),f=o("3Z7N"),g=o("77FS"),m=o("ZQVr");function j(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const v={left:0,right:0,bottom:0,zIndex:670};class x extends i.Component{constructor(...e){super(...e),j(this,"state",{isUploading:!1}),j(this,"handleResize",()=>{if(this._canvasContainer){const{width:e,height:t}=this._canvasContainer.getBoundingClientRect();this.pinCanvas&&this.pinCanvas.resize(e,t,800)}}),j(this,"handleOnLoaded",e=>{const{asset:t}=this.props,o=e;o&&"localImage"===t.type&&(this.pinCanvas=e,o.setImage(t.src).then(()=>{o.setAspectRatio({w:16,h:9}),this.forceUpdate(),this.handleResize()}))}),j(this,"handleSave",()=>{const{asset:e,onSave:t,onError:o}=this.props;if("localVideo"===e.type){const{fileSrc:o,height:i,width:n,src:r}=e;this.setState({isUploading:!0}),Object(m.l)(o,"user-profile-cover-video").then(({uploadId:e})=>{const o={height:i,width:n,thumbnail:"",url:r};t({source:"video",video:{id:e,video_list:{V_HLSV4:o,V_720P:o}}})}).then(()=>this.setState({isUploading:!1})).catch(()=>this.setState({isUploading:!1}))}else if(this.pinCanvas){const{width:i,height:n,src:r}=this.pinCanvas.getCanvasOutput({width:e.width,height:e.height});Object(m.i)(r).then(({image_url:e})=>{const o={width:i,height:n,url:e};t({source:"image",images:{"474x":o,"750x":o,"1200x":o}})}).catch(e=>{o(e)})}}),j(this,"setCanvasContainerRef",e=>{this._canvasContainer=e,this.handleResize()})}componentDidMount(){window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const{asset:e,onHide:t}=this.props,{isUploading:o}=this.state;return Object(a.jsx)(s.z,{children:Object(a.jsx)(f.a,{children:Object(a.jsx)(p.a,{position:"fixed",style:v,children:Object(a.jsxs)(s.f,{display:"flex",direction:"column",height:"100%",children:[Object(a.jsx)(s.f,{ref:this.setCanvasContainerRef,alignItems:"center",color:"lightGray",display:"flex",flex:"grow",height:"100%",justifyContent:"center",overflow:"hidden",position:"relative",children:"localImage"===e.type?Object(a.jsx)(b.a,{borderRadius:0,onLoaded:this.handleOnLoaded}):Object(a.jsxs)(s.f,{height:450,position:"relative",width:800,children:[o&&Object(a.jsx)(s.f,{bottom:!0,left:!0,right:!0,top:!0,alignItems:"center",color:"transparentDarkGray",dangerouslySetInlineStyle:{__style:{zIndex:10}},display:"flex",justifyContent:"center",position:"absolute",children:Object(a.jsx)(s.U,{show:!0,accessibilityLabel:r.a._("Uploading video","profileCover.videoUpload.loading","spinner label on profile video cover tab")})}),Object(a.jsx)(g.a,{height:e.height,loop:!0,playing:!0,src:e.src,width:e.width})]})}),Object(a.jsxs)(s.f,{alignItems:"center",color:"white",display:"flex",justifyContent:"between",paddingX:7,paddingY:6,children:[Object(a.jsx)(s.f,{paddingX:1,children:Object(a.jsx)(s.u,{size:"sm",children:r.a._("Update profile cover?","Text to confirm or cancel updating profile cover","Text to confirm or cancel updating profile cover")})}),Object(a.jsxs)(s.f,{display:"flex",children:[Object(a.jsx)(s.f,{paddingX:1,children:Object(a.jsx)(s.g,{inline:!0,name:"cancel",text:r.a._("Cancel","Cancel profile cover upload","Cancel profile cover upload"),onClick:t})}),Object(a.jsx)(s.f,{"data-test-id":"profile-cover-save-button",paddingX:1,children:Object(a.jsx)(s.g,{inline:!0,name:"save",text:r.a._("Save","Save changes to profile cover image or video","Save changes to profile cover image or video"),color:"red",disabled:o,onClick:this.handleSave})})]})]})]})})})})}}var y=o("TSYQ"),O=o.n(y),_=o("DzJC"),w=o.n(_),S=o("pLLR");function C(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const L=200,I=134,M=25,P=e=>e*(Math.PI/180),A=e=>Math.sin(P(e)),R=e=>Math.tan(P(e));class E extends i.Component{constructor(...e){super(...e),C(this,"state",{numColumns:8,translateY:-1}),C(this,"calculateRotation",w()(()=>{const e=142/(t=M,Math.cos(P(t)));var t;this.setState({numColumns:Math.ceil(window.innerWidth/e)+3,translateY:.5*window.innerWidth*R(M)+300*(1-A(M))})},10))}componentDidMount(){window.addEventListener("resize",this.calculateRotation),this.calculateRotation()}componentWillUnmount(){window.removeEventListener("resize",this.calculateRotation)}renderPin(e){var t,o,i,n;const c={height:L,padding:"4px",width:I};return Object(a.jsx)("div",{style:c,children:Object(a.jsx)(s.C,{height:L,rounding:2,wash:!0,width:I,children:Object(a.jsx)(s.x,{alt:r.a._("Native content image","image displaying native content in a grid","image displaying native content in a grid"),color:e?null!==(t=e.dominant_color)&&void 0!==t?t:"":"#F0F0F0",fit:"cover",naturalHeight:L,naturalWidth:I,src:null!==(o=null==e||null===(i=e.images)||void 0===i||null===(n=i["236x"])||void 0===n?void 0:n.url)&&void 0!==o?o:""})})})}render(){const{pins:e,requestContext:t}=this.props,{numColumns:o,translateY:i}=this.state,{isRTL:n}=t;if(0===e.length)return null;let r=0,c=0;const l=[];for(let u=0;u<o;u+=1){const t=[];for(let l=0;l<3;l+=1){const i=`row-column-${l}-${u}-${r}`;r<=1||r>=3*o-2?t.push(Object(a.jsx)(s.f,{children:this.renderPin()},i)):(t.push(Object(a.jsx)(s.f,{children:this.renderPin(e[c])},i)),c+=1),r+=1,c>=e.length&&(c=0)}const i=126*A(M)*.8265*u%208,n=parseInt(142*u*A(M),10)+i+"px";l.push(Object(a.jsx)(s.f,{display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{marginTop:n}},children:t},"column-"+u))}const d={transform:`translate(${-parseInt(300*R(M),10)}px, ${-parseInt(i,10)}px)`,visibility:i<0?"hidden":"visible"};return Object(a.jsx)(s.f,{dangerouslySetInlineStyle:{__style:d},children:Object(a.jsx)("div",{className:O()("TiltedPinsTransformer",{RTL:n}),style:{width:window.innerWidth},children:l})})}}var k=Object(S.e)(E);function U({video:e}){const{video_list:t={}}=e,{V_720P:o,V_HLSV4:i}=t,{height:n,width:r}=i||o||{},s=[];return i&&s.push({type:"video/m3u8",src:i.url}),o&&s.push({type:"video/mp4",src:o.url}),Object(a.jsx)(g.a,{height:null!=n?n:1,loop:!0,muted:!0,playing:!0,src:s,width:null!=r?r:1,showControls:!1})}var z=o("eOdZ"),B=o("U4JR"),T=o("w70y");function D(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const F={__style:{paddingTop:64}};class N extends i.Component{constructor(...e){super(...e),D(this,"saveScrollContainer",e=>{this.scrollContainer=e}),D(this,"onRadioChange",e=>{const{onSelect:t}=this.props;t(e);const{source:o}=e;let i;switch(o){case"all_user_pins":i=7189;break;case"domain_pins":i=7190;break;default:i=7191}Object(B.b)(i,{view:196})}),D(this,"renderBoard",e=>{const{id:t,image_cover_url:o,name:i}=e,{coverSource:n}=this.props,r="specific_board"===n.source&&n.source_id===t;return Object(a.jsxs)(s.f,{margin:1,column:12,display:"flex",direction:"row",children:[Object(a.jsx)(s.f,{paddingY:2,children:Object(a.jsx)(s.N,{checked:r,id:"profileCoverSourceId_"+t,name:"profileCoverSource",onChange:()=>this.onRadioChange({source:"specific_board",source_id:t}),value:"profileCoverSourceId_"+t})}),Object(a.jsx)(s.f,{flex:"grow",children:Object(a.jsx)(s.y,{htmlFor:"profileCoverSourceId_"+t,children:Object(a.jsxs)(s.f,{paddingX:4,display:"flex",direction:"row",children:[Object(a.jsx)(s.f,{children:Object(a.jsx)(s.C,{height:40,rounding:2,wash:!0,width:40,children:Object(a.jsx)(s.x,{alt:null!=i?i:"",color:"#F0F0F0",fit:"cover",naturalHeight:40,naturalWidth:40,src:o||""})})}),Object(a.jsx)(s.f,{paddingX:2,display:"flex",alignItems:"center",children:Object(a.jsx)(s.cb,{weight:"bold",children:i})})]})})})]},t)})}componentDidMount(){Object(B.b)(13,{view:196})}render(){const{boards:e,coverSource:t,showActivity:o}=this.props,{data:n,fetchMore:c,isAtEnd:l,isFetching:d,isLoaded:u}=e,{scrollContainer:h}=this;return Object(a.jsx)(s.f,{height:426,column:12,ref:this.saveScrollContainer,children:Object(a.jsx)(s.f,{column:12,paddingX:12,dangerouslySetInlineStyle:F,children:Object(a.jsxs)(s.f,{column:12,paddingX:4,display:"flex",children:[Object(a.jsxs)(s.f,{column:6,display:"flex",direction:"column",children:[Object(a.jsx)(s.f,{marginBottom:4,children:Object(a.jsx)(s.u,{size:"sm",children:r.a._("Feature a board","Label to select a board for profile cover source","Label to select a board for profile cover source")})}),u?Object(a.jsx)(s.f,{column:12,display:"flex",direction:"column",justifyContent:"center",children:n&&n.length>0&&h?Object(a.jsxs)(i.Fragment,{children:[Object(a.jsx)(s.P,{container:h,isAtEnd:l,isFetching:d,fetchMore:c}),n.map(this.renderBoard)]}):Object(a.jsx)(s.cb,{children:r.a._("No boards","Label when the user has no boards to show","Label when the user has no boards to show")})}):Object(a.jsx)(s.f,{column:12,display:"flex",justifyContent:"center",children:Object(a.jsx)(s.U,{accessibilityLabel:r.a._("Loading boards","Label for the loading spinner in the profile cover source picker","Label for the loading spinner in the profile cover source picker"),show:!0})})]}),Object(a.jsxs)(s.f,{column:6,display:"flex",direction:"column",children:[Object(a.jsx)(s.f,{marginBottom:4,children:Object(a.jsx)(s.u,{size:"sm",children:r.a._("Feature Pins","Label to select Pins for profile cover source","Label to select Pins for profile cover source")})}),Object(a.jsxs)(s.f,{paddingY:2,display:"flex",children:[Object(a.jsx)(s.N,{checked:"all_user_pins"===t.source,id:"profileCoverSourceLatest",name:"profileCoverSource",onChange:()=>this.onRadioChange({source:"all_user_pins",source_id:null}),value:"profileCoverSourceLatest"}),Object(a.jsx)(s.f,{flex:"grow",children:Object(a.jsx)(s.y,{htmlFor:"profileCoverSourceLatest",children:Object(a.jsxs)(s.f,{paddingX:4,display:"flex",direction:"column",children:[Object(a.jsx)(s.f,{marginBottom:1,minHeight:24,display:"flex",alignItems:"center",children:Object(a.jsx)(s.cb,{weight:"bold",children:r.a._("Latest Pins","label for latest pins profile cover source","label for latest pins profile cover source")})}),Object(a.jsx)(s.cb,{size:"md",color:"gray",children:r.a._("The most recent Pins you saved","Label for latest pins profile cover source","Label for latest pins profile cover source")})]})})})]}),o&&Object(a.jsxs)(s.f,{paddingY:2,display:"flex",children:[Object(a.jsx)(s.N,{checked:"domain_pins"===t.source,id:"profileCoverSourceDomainPins",name:"profileCoverSource",onChange:()=>this.onRadioChange({source:"domain_pins",source_id:null}),value:"profileCoverSourceDomainPins"}),Object(a.jsx)(s.f,{flex:"grow",children:Object(a.jsx)(s.y,{htmlFor:"profileCoverSourceDomainPins",children:Object(a.jsxs)(s.f,{paddingX:4,display:"flex",direction:"column",children:[Object(a.jsx)(s.f,{marginBottom:1,minHeight:24,display:"flex",alignItems:"center",children:Object(a.jsx)(s.cb,{weight:"bold",children:r.a._("Recent activity","label for domain pins profile cover source","label for domain pins profile cover source")})}),Object(a.jsx)(s.cb,{size:"md",color:"gray",children:r.a._("Pins saved from your claimed accounts","Label for domain pins profile cover source","Label for domain pins profile cover source")})]})})})]})]})]})})})}}var H=Object(T.b)({name:"BoardsFeedResource",key:"boards",options:e=>({field_set_key:"profile_grid_item",privacy_filter:"public",sort:e.sort||"custom",username:e.username,include_empty:!1}),allowStale:!1})(N);function V(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class W extends i.Component{constructor(...e){super(...e),V(this,"state",{coverSource:this.props.coverSource}),V(this,"handleSave",()=>{const{onSave:e}=this.props,{coverSource:t}=this.state;e(t)}),V(this,"handleSelect",e=>{this.setState({coverSource:e})})}render(){const{onHide:e,showActivity:t,sort:o,viewer:i}=this.props,{coverSource:n}=this.state;return Object(a.jsx)(l.b,{accessibilityModalLabel:r.a._("Select profile cover source","Accessibility label for modal to select profile cover source","Accessibility label for modal to select profile cover source"),onDismiss:e,heading:r.a._("Select a board to feature","Heading for modal to select profile cover source","Heading for modal to select profile cover source"),size:"lg",footer:Object(a.jsxs)(s.f,{alignItems:"center",column:12,display:"flex",justifyContent:"end",children:[Object(a.jsx)(s.f,{flex:"shrink",paddingX:2,children:Object(a.jsx)(s.g,{color:"gray",inline:!0,text:r.a._("Cancel","Button label for cancelling the action to set profile cover pins","Button label for cancelling the action to set profile cover pins"),onClick:e})}),Object(a.jsx)(s.f,{flex:"shrink",paddingX:2,children:Object(a.jsx)(s.g,{color:"red",inline:!0,text:r.a._("Done","Button label for confirming the action of setting profile cover pins","Button label for confirming the action of setting profile cover pins"),onClick:this.handleSave})})]}),children:Object(a.jsx)(H,{coverSource:n,username:i.isAuth&&i.username,showActivity:t,sort:o,onSelect:this.handleSelect})})}}var q=Object(n.connect)((function({viewer:e}){return{viewer:e}}),()=>({}))(W);function X(e,t){return{type:"PROFILE_COVER_SOURCE",payload:{id:e,coverSource:t}}}var Y=o("2o8U"),G=o("HKfR");function K(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class J extends i.Component{constructor(...e){super(...e),K(this,"state",{errorMessage:void 0,loading:!1}),K(this,"mounted",!1),K(this,"handleAddAssets",e=>{const{imageOnly:t,onUpload:o}=this.props,i=e[0];return i?(this.setState({errorMessage:void 0,loading:!0}),Object(G.a)(i,{allowVideo:!t}).then(e=>{this.mounted&&("error"===e.type?this.setState({errorMessage:e.message,loading:!1}):"localImage"===e.type?(this.setState({loading:!1}),o(e)):Math.abs(e.width/e.height-1.7777777777777777)>.1?this.setState({errorMessage:r.a._("Please upload a video that is 16:9 for your profile cover","Error message for uploading a video that is not correct aspect ratio","Error message for uploading a video that is not correct aspect ratio"),loading:!1}):(this.setState({loading:!1}),o(e)))})):Promise.resolve()})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{imageOnly:e,onHide:t}=this.props,{errorMessage:o,loading:i}=this.state;return Object(a.jsx)(l.b,{accessibilityModalLabel:r.a._("Upload profile cover source","Accessibility label for modal to upload profile cover source","Accessibility label for modal to upload profile cover source"),onDismiss:t,heading:e?r.a._("Add an image","uploadCoverSourceModal.headingText","Heading for modal to upload profile cover source"):r.a._("Add an image or video","Heading for modal to upload profile cover source","Heading for modal to upload profile cover source"),size:"lg",children:Object(a.jsx)(s.f,{height:475,margin:4,children:i?Object(a.jsxs)(s.f,{alignContent:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #dadada",borderRadius:6}},direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[Object(a.jsx)(s.U,{accessibilityLabel:r.a._("Loading...","Loading spinner for uploaded image or video","Loading spinner for uploaded image or video"),show:!0}),Object(a.jsx)(s.f,{marginTop:4,children:Object(a.jsx)(s.cb,{align:"center",color:"gray",weight:"bold",children:r.a._("Loading...","Loading spinner for uploaded image or video","Loading spinner for uploaded image or video")})})]}):Object(a.jsx)(Y.a,{addAssets:this.handleAddAssets,errorMessage:o,imageOnly:e})})})}}var $=o("ANjH");function Z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const Q={edit:{bottom:16,right:16}};class ee extends i.Component{constructor(...e){super(...e),Z(this,"state",{activeModal:null,asset:null,boardName:null,boardUrl:null,showFlyout:!1,errorDetails:null}),Z(this,"buttonRef",Object(i.createRef)()),Z(this,"openModalMenuFlyout",()=>{this.setState({showFlyout:!0})}),Z(this,"closeModalMenuFlyout",()=>{this.setState({showFlyout:!1})}),Z(this,"openModal",e=>()=>{const{user:t,viewer:o}=this.props;this.setState({activeModal:e,showFlyout:!1}),Object(B.b)(101,{view:4,viewParameter:o.isAuth&&t.username===o.username?3106:3107,element:10537})}),Z(this,"closeModal",()=>{this.setState({activeModal:null,asset:null})}),Z(this,"logAndCloseModal",()=>{Object(B.b)(101,{view:196,element:75}),this.closeModal()}),Z(this,"handleUpload",e=>{this.setState({asset:e,activeModal:"previewCoverSource"})}),Z(this,"handleHideErrorModal",()=>{this.setState({errorDetails:null})}),Z(this,"handleError",e=>{this.setState({errorDetails:e})}),Z(this,"handleSave",e=>{const{saveCoverSource:t,viewer:o}=this.props;o.isAuth&&(t(o.id,e),this.setState({boardName:null,boardUrl:null})),Object(B.b)(101,{view:196,element:76}),this.closeModal()}),Z(this,"logSourceButtonClick",()=>{const{user:e,viewer:t}=this.props;Object(B.b)(101,{view:4,viewParameter:t.isAuth&&t.username===e.username?3106:3107,element:10498})}),Z(this,"renderLinkToSource",()=>{const{coverSource:e,user:t,viewer:o}=this.props,{boardName:i,boardUrl:n}=this.state;let c="",l="";if("all_user_pins"===e.source)c=`/${t.username}/pins/`,l=r.a._("Latest Pins","Latest pins label in tilted pins header","Latest pins label in tilted pins header");else if("domain_pins"===e.source)c=`/${t.username}/_activity/`,l=r.a._("Recent activity","Recent activity label in tilted pins header","Recent activity label in tilted pins header");else{if("specific_board"===e.source&&!i&&o.isAuth)return z.a.create("BoardResource",{board_id:e.source_id}).callGet({showError:!1}).then(e=>{if(e.resource_response&&e.resource_response.data){const t=e.resource_response.data;this.setState({boardName:t.name,boardUrl:t.url})}}).catch(e=>{40===e.api_error_code&&this.setState({activeModal:"noBoardError"})}),null;if("specific_board"!==e.source||!i)return null;l=i,c=n}return Object(a.jsx)(s.B,{href:c||"",onClick:({disableOnNavigation:e})=>{e(),this.logSourceButtonClick()},children:Object(a.jsx)("div",{className:"TiltedPinSourceLink",children:Object(a.jsx)(s.f,{alignItems:"center",display:"flex",justifyContent:"center",children:Object(a.jsxs)(s.f,{alignItems:"center",display:"flex",justifyContent:"center",children:[Object(a.jsx)(s.cb,{weight:"bold",children:l}),Object(a.jsx)(s.K,{icon:"arrow-circle-forward",iconColor:"darkGray"})]})})})})})}componentDidMount(){const{coverSource:e}=this.props;["image","video"].includes(e.source)&&window.scroll(0,150)}render(){var e,t;const{coverSource:o,metadata:n,pins:l,requestContext:p,updatedBoardOrder:b,user:f,userSettingsResource:g,viewer:m}=this.props,{activeModal:j,asset:v,errorDetails:y,showFlyout:O}=this.state,_=[],{data:w}=g,S=(null==w?void 0:w.connected_to_etsy)||(null==w?void 0:w.connected_to_instagram)||(null==w?void 0:w.connected_to_youtube),C=f.domain_verified||S;C&&_.push({onClick:this.openModal("uploadCoverSource"),children:r.a._("Upload image or video","Button to upload an image or video as a profile cover","Button to upload an image or video as a profile cover")}),_.push({onClick:this.openModal("selectCoverSource"),children:r.a._("Choose a board","Button to select Pins from a board to show as profile cover","Button to select Pins from a board to show as profile cover")});const L=this.openModal("uploadCoverSource"),I=p.isRTL?{...Q.edit,right:void 0,left:16}:Q.edit,M=m.isAuth&&m.username===f.username,P=["image","video"].includes(o.source),A="all_user_pins"===o.source||"domain_pins"===o.source||"specific_board"===o.source,R="empty"===o.source||A&&l.isLoaded&&0===(null===(e=l.data)||void 0===e?void 0:e.length);let E=null;if(R&&M)E=Object(a.jsx)(c,{handleAddCoverImageClick:this.openModal("uploadCoverSource")});else if("image"===o.source)E=Object(a.jsx)(s.x,{alt:r.a._("Profile cover image","Screenread text for profile cover image","Screenread text for profile cover image"),naturalHeight:o.images["1200x"].height,naturalWidth:o.images["1200x"].width,src:o.images["1200x"].url});else if("video"===o.source)E=Object(a.jsx)(U,{video:o.video});else if(A){var z;E=Object(a.jsx)(k,{pins:null!==(z=l.data)&&void 0!==z?z:[]})}let B=76;(A&&l.isLoaded&&Number(null===(t=l.data)||void 0===t?void 0:t.length)>0||P||R&&M)&&(B=369);const T=P?s.o:i.Fragment;return Object(a.jsxs)(T,{children:[Object(a.jsxs)(s.f,{dangerouslySetInlineStyle:{__style:{marginBottom:"-60px"}},height:B,overflow:P?void 0:"hidden",position:"relative",children:[Object(a.jsx)(s.C,{height:"100%",rounding:8,children:E}),M&&!R&&Object(a.jsxs)(s.f,{dangerouslySetInlineStyle:{__style:{...I,zIndex:1}},position:"absolute",children:[Object(a.jsx)(s.f,{"data-test-id":"profile-cover-edit-button",ref:this.buttonRef,children:Object(a.jsx)(s.w,{accessibilityHaspopup:!0,accessibilityLabel:r.a._("Edit profile cover","Accessibility label for button to edit profile cover source","Accessibility label for button to edit profile cover source"),bgColor:"white",icon:"edit",iconColor:"darkGray",onClick:L,size:"md"})}),O&&Object(a.jsx)(s.L,{anchor:this.buttonRef.current,idealDirection:"down",onDismiss:this.closeModalMenuFlyout,size:"md",children:Object(a.jsx)(h.a,{items:_})})]})]}),"selectCoverSource"===j&&Object(a.jsx)(q,{coverSource:o,onHide:this.logAndCloseModal,onSave:this.handleSave,showActivity:f.profile_discovered_public&&f.show_discovered_feed||!1,sort:b||n.data&&n.data.most_recent_board_sort_order||"custom"}),"uploadCoverSource"===j&&Object(a.jsx)(J,{imageOnly:!C,onHide:this.closeModal,onUpload:this.handleUpload}),"previewCoverSource"===j&&v&&Object(a.jsx)(x,{asset:v,onError:this.handleError,onHide:this.closeModal,onSave:this.handleSave}),"noBoardError"===j&&M&&Object(a.jsx)(d,{onHide:this.closeModal,onOpenSelectSource:this.openModal("selectCoverSource")}),y&&Object(a.jsx)(u.a,{error:y,onHide:this.handleHideErrorModal})]})}}t.default=Object($.compose)(Object(n.connect)((e,t)=>{const o=((e.users||{})[t.user.id]||t.user||{}).profile_cover,{updatedBoardOrder:i}=e.ui.views||{};return{updatedBoardOrder:i,coverSource:"video"===(null==o?void 0:o.source)&&!o.video||"image"===(null==o?void 0:o.source)&&!o.images?{source:"all_user_pins",source_id:null}:o,viewer:e.viewer}},e=>({saveCoverSource:(t,o)=>{return e((i=t,n=o,e=>{"image"===n.source?z.a.create("ProfileCoverResource",{source:"image",image_url:n.images["1200x"].url}).callCreate().then(()=>e(X(i,n))):"video"===n.source?z.a.create("ProfileCoverResource",{source:"video",video_upload_id:n.video.id}).callCreate().then(()=>e(X(i,n))):z.a.create("ProfileCoverResource",n).callCreate().then(()=>e(X(i,n)))}));var i,n}})),Object(T.b)({name:"ProfileCoverFeedResource",key:"pins",options:e=>({username:e.user.username,field_set_key:"grid_item",exclude_add_pin_rep:!0,profileCoverSource:e.coverSource.source,profileCoverSourceId:e.coverSource.source_id})}),Object(T.b)({name:"UserSettingsResource",key:"userSettingsResource"}),Object(T.b)({name:"UserMetadataResource",key:"metadata",options:e=>({user:{id:e.user.username}})}),S.e)(ee)},"2o8U":function(e,t,o){o.d(t,"a",(function(){return h}));var i=o("q1tI"),n=o("cPxt"),r=o("Ye/N"),s=o("EIqB"),a=o("U4JR"),c=o("n6mq"),l=o("IIK6"),d=o("nKUr");const u={default:{backgroundImage:"linear-gradient(to left, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.03) 50%, rgba(0, 0, 0, 0))"},drag:{backgroundImage:"linear-gradient(to left, rgba(74, 144, 226, 0), rgba(74, 144, 226, 0.03) 50%, rgba(74, 144, 226, 0))"},error:{backgroundImage:"linear-gradient(to left, rgba(230, 0, 35, 0), rgba(230, 0, 35, 0.03) 50%, rgba(230, 0, 35, 0))"}};function h({addAssets:e,errorMessage:t,imageOnly:o}){const[h,p]=Object(i.useState)(!1),b=Object(i.useRef)(!1);Object(i.useEffect)(()=>(b.current=!0,()=>{b.current=!1}));return Object(d.jsx)(n.a,{accept:[...l.n,...o?[]:l.qb].join(","),allowMultipleFiles:!0,color:"white",hasError:!!t,id:"asset-picker-upload",onChange:t=>{p(!0);const o=Array.from(t.target.files);p(!0),Object(a.b)(101,{component:13392,element:11265}),e(o).then(()=>{b.current&&p(!1)})},onDrop:t=>{p(!0);const o=Object(s.a)(t.dataTransfer);p(!0),Object(a.b)(3502,{component:13392,element:11265}),e(o).then(()=>{b.current&&p(!1)})},children:e=>Object(d.jsxs)(c.f,{alignContent:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #dadada",borderRadius:6}},"data-test-id":"asset-picker-empty-pane",direction:"column",display:"flex",height:"100%",justifyContent:"center",position:"relative",children:[h?Object(d.jsx)(c.U,{accessibilityLabel:r.a._("Loading...","Loading assets","Loading assets"),show:!0}):Object(d.jsxs)(c.f,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",padding:2,children:[Object(d.jsx)(c.v,{color:"gray",icon:"arrow-circle-up",accessibilityLabel:o?r.a._("Add an image","uploadCoverSourceModal.emptyPane.addIconAccessibilityLabel","Add an image as part of the pin"):r.a._("Add an image or video","Add an image or video as part of the pin","Add an image or video as part of the pin"),size:32}),Object(d.jsx)(c.f,{paddingY:4,children:Object(d.jsx)(c.cb,{children:r.a._("Drag and drop assets","A drag and drop prompt for adding assets","A drag and drop prompt for adding assets")})}),Object(d.jsx)(c.g,{color:"red",inline:!0,text:r.a._("Upload from your computer","Button text on asset picker to upload image from a computer","Button text on asset picker to upload image from a computer")})]}),Object(d.jsx)(c.f,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:u[e?"drag":t?"error":"default"]},display:"flex",justifyContent:"center",left:!0,right:!0,position:"absolute",children:t?Object(d.jsx)(c.f,{padding:5,maxWidth:468,children:Object(d.jsx)(c.cb,{align:"center",color:"red",size:"md",children:t})}):Object(d.jsxs)(i.Fragment,{children:[Object(d.jsxs)(c.f,{display:"flex",padding:5,children:[Object(d.jsx)(c.f,{alignItems:"center",display:"flex",marginEnd:3,children:Object(d.jsx)(c.v,{accessibilityLabel:r.a._("Image icon","accessibilitiy label for image icon","accessibilitiy label for image icon"),icon:"camera-roll",size:22})}),Object(d.jsxs)(c.f,{display:"flex",direction:"column",children:[Object(d.jsx)(c.cb,{color:"gray",size:"sm",weight:"bold",children:r.a._("High resolution images","Text description of image that can be uploaded","Text description of image that can be uploaded")}),Object(d.jsx)(c.cb,{color:"gray",size:"sm",children:r.a._("PNG, JPG, GIF up to 10MB","Image type and limits that can be uploaded","Image type and limits that can be uploaded")})]})]}),!o&&Object(d.jsxs)(c.f,{display:"flex",padding:5,children:[Object(d.jsx)(c.f,{alignItems:"center",display:"flex",marginEnd:3,children:Object(d.jsx)(c.v,{accessibilityLabel:r.a._("Video icon","accessibilitiy label for video icon","accessibilitiy label for video icon"),icon:"video-camera",size:24})}),Object(d.jsxs)(c.f,{display:"flex",direction:"column",children:[Object(d.jsx)(c.cb,{color:"gray",size:"sm",weight:"bold",children:r.a._("High-quality video","Text description of image that can be uploaded","Text description of image that can be uploaded")}),Object(d.jsx)(c.cb,{color:"gray",size:"sm",children:r.a._("MOV, MP4, up to 2GB, 5min.","Video type and limits that can be uploaded","Video type and limits that can be uploaded")})]})]})]})})]})})}},"3Z7N":function(e,t,o){o.d(t,"a",(function(){return n}));var i=o("q1tI");class n extends i.Component{constructor(...e){var t,o,i;super(...e),i=null,(o="prevOverflow")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}componentDidMount(){"undefined"!=typeof window&&(this.prevOverflow=window.document.body.style.overflow,window.document.body.style.overflow="hidden")}componentWillUnmount(){"undefined"!=typeof window&&(window.document.body.style.overflow=this.prevOverflow)}render(){return this.props.children}}},"4FwD":function(e,t,o){o.d(t,"a",(function(){return d}));var i=o("q1tI"),n=o("Ye/N"),r=o("rYoy"),s=o("n6mq"),a=o("nKUr");function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const l=Object(i.lazy)(()=>Promise.all([o.e(490),o.e(491),o.e(411),o.e(653)]).then(o.bind(null,"U8OK")));class d extends i.Component{constructor(...e){super(...e),c(this,"loaded",!1),c(this,"setRef",e=>{const{onLoaded:t}=this.props;!this.loaded&&t&&t(e),this.loaded=!0})}render(){const{borderRadius:e,height:t,width:o}=this.props;return Object(a.jsx)(r.a,{fallback:Object(a.jsx)(s.f,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(a.jsx)(s.U,{accessibilityLabel:n.a._("Loading image editor","accessibility label for loading spinner","accessibility label for loading spinner"),show:!0})}),children:Object(a.jsx)(l,{borderRadius:e,width:o,height:t,ref:this.setRef})})}}},"77FS":function(e,t,o){o.d(t,"a",(function(){return c}));var i=o("q1tI"),n=o("Ye/N"),r=o("n6mq"),s=o("nKUr");function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class c extends i.Component{constructor(...e){super(...e),a(this,"state",{controls:!1,duration:0,playing:!!this.props.playing,volume:this.props.muted?0:1}),a(this,"handleDurationChange",({duration:e})=>{this.setState({duration:e})}),a(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),a(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),a(this,"handleShowControls",()=>this.setState({controls:!0})),a(this,"handleHideControls",()=>this.setState({controls:!1})),a(this,"handleTouch",({event:e})=>{e.stopPropagation(),this.setState(e=>({playing:!e.playing}))}),a(this,"handleVolumeChange",({event:e,volume:t})=>{e.stopPropagation(),this.setState({volume:t})})}render(){const{captions:e,height:t,loop:o,src:i,width:a,showControls:c}=this.props,{controls:l,playing:d,volume:u}=this.state;return Object(s.jsx)(r.bb,{onMouseEnter:this.handleShowControls,onMouseLeave:this.handleHideControls,onTap:this.handleTouch,rounding:2,children:Object(s.jsx)(r.jb,{accessibilityMaximizeLabel:n.a._("Maximize","Maximize button on video","Maximize button on video"),accessibilityMinimizeLabel:n.a._("Minimize","Minimize button on video","Minimize button on video"),accessibilityMuteLabel:n.a._("Mute","Mute button on video","Mute button on video"),accessibilityPauseLabel:n.a._("Pause","Pause button on video","Pause button on video"),accessibilityPlayLabel:n.a._("Play","Play button on video","Play button on video"),accessibilityUnmuteLabel:n.a._("Unmute","Unmute button on video","Unmute button on video"),aspectRatio:a/t,captions:e,controls:c&&l,loop:o,onDurationChange:this.handleDurationChange,onPlay:this.handlePlay,onPause:this.handlePause,onVolumeChange:this.handleVolumeChange,playing:d,volume:u,src:i})})}}a(c,"defaultProps",{captions:"",loop:!1,playing:!1,muted:!1,showControls:!0})},IIK6:function(e,t,o){o.d(t,"cb",(function(){return i})),o.d(t,"U",(function(){return n})),o.d(t,"e",(function(){return r})),o.d(t,"T",(function(){return s})),o.d(t,"P",(function(){return a})),o.d(t,"Q",(function(){return c})),o.d(t,"R",(function(){return l})),o.d(t,"Y",(function(){return d})),o.d(t,"X",(function(){return u})),o.d(t,"V",(function(){return h})),o.d(t,"W",(function(){return p})),o.d(t,"ab",(function(){return b})),o.d(t,"Z",(function(){return f})),o.d(t,"bb",(function(){return g})),o.d(t,"G",(function(){return m})),o.d(t,"db",(function(){return j})),o.d(t,"C",(function(){return v})),o.d(t,"F",(function(){return x})),o.d(t,"J",(function(){return y})),o.d(t,"D",(function(){return O})),o.d(t,"E",(function(){return _})),o.d(t,"I",(function(){return w})),o.d(t,"B",(function(){return S})),o.d(t,"i",(function(){return C})),o.d(t,"j",(function(){return L})),o.d(t,"lb",(function(){return I})),o.d(t,"f",(function(){return M})),o.d(t,"b",(function(){return P})),o.d(t,"mb",(function(){return A})),o.d(t,"g",(function(){return R})),o.d(t,"h",(function(){return E})),o.d(t,"nb",(function(){return k})),o.d(t,"c",(function(){return U})),o.d(t,"z",(function(){return z})),o.d(t,"ib",(function(){return B})),o.d(t,"jb",(function(){return T})),o.d(t,"kb",(function(){return D})),o.d(t,"A",(function(){return F})),o.d(t,"K",(function(){return N})),o.d(t,"eb",(function(){return H})),o.d(t,"fb",(function(){return V})),o.d(t,"O",(function(){return W})),o.d(t,"ob",(function(){return q})),o.d(t,"w",(function(){return X})),o.d(t,"k",(function(){return Y})),o.d(t,"n",(function(){return G})),o.d(t,"m",(function(){return K})),o.d(t,"o",(function(){return J})),o.d(t,"p",(function(){return $})),o.d(t,"q",(function(){return Z})),o.d(t,"r",(function(){return Q})),o.d(t,"v",(function(){return ee})),o.d(t,"s",(function(){return te})),o.d(t,"u",(function(){return oe})),o.d(t,"t",(function(){return ie})),o.d(t,"x",(function(){return ne})),o.d(t,"y",(function(){return re})),o.d(t,"qb",(function(){return se})),o.d(t,"pb",(function(){return ae})),o.d(t,"tb",(function(){return ce})),o.d(t,"vb",(function(){return le})),o.d(t,"wb",(function(){return de})),o.d(t,"xb",(function(){return ue})),o.d(t,"sb",(function(){return he})),o.d(t,"ub",(function(){return pe})),o.d(t,"rb",(function(){return be})),o.d(t,"hb",(function(){return fe})),o.d(t,"S",(function(){return ge})),o.d(t,"l",(function(){return me})),o.d(t,"H",(function(){return je})),o.d(t,"gb",(function(){return ve})),o.d(t,"L",(function(){return xe})),o.d(t,"M",(function(){return ye})),o.d(t,"N",(function(){return Oe})),o.d(t,"a",(function(){return _e})),o.d(t,"d",(function(){return we}));const i=880,n=340,r=380,s=510,a=40,c=20,l=4,d=474,u=186,h=40,p=10,b=88,f=183,g=130,m=24,j=400,v=50,x=8,y=8,O=5,_=20,w=13,S=5,C=20,L=C**2,I=100,M=500,P=500,A=40,R=100,E=5,k=["attempted","publishing","succeeded","uploading"],U={carousel:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],single:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],story:[{w:9,h:16}]},z=["tl","tc","tr","bl","bc","br"],B=["left","center"],T=["top","center","bottom"],D=["none","uppercase"],F=["sm","md","lg"],N=[1,.75],H=198,V=132,W=(Math.floor(16*V/9),1),q=56,X=240,Y="cubic-bezier(0.66, 0.025, 0.33, 0.975)",G=["image/bmp","image/gif","image/jpeg","image/png","image/tiff","image/webp"],K=["bmp","gif","jpg","jpeg","png","tiff","webp"],J=89478485,$=20971520,Z=100,Q=100,ee=1e3,te=1500,oe=2,ie=3,ne=20,re=20,se=["video/mp4","video/x-m4v","video/quicktime"],ae=["mp4","m4v","mov"],ce=2147483648,le=4,de=Z,ue=Q,he=900,pe=.5,be=1.91,fe=2,ge=["processing","publishing","saving"],me=2500,je=3,ve=5e3,xe="pin-builder-default-education-id",ye="pin-builder-default-tour-id",Oe="pin-builder-editing-tour-id",_e={CAROUSEL:"CAROUSEL",STATIC:"STATIC",VIDEO:"VIDEO",COLLECTIONS:"COLLECTIONS"},we={TRAFFIC:"TRAFFIC",AWARENESS:"AWARENESS",APP_INSTALL:"APP_INSTALL",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS"}},yl9J:function(e,t,o){o.d(t,"a",(function(){return c}));var i=o("q1tI"),n=o("n6mq"),r=o("nKUr");function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class a extends i.PureComponent{constructor(...e){super(...e),s(this,"state",{hovered:!1}),s(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),s(this,"handleMouseLeave",()=>{this.setState({hovered:!1})})}render(){const{children:e,onClick:t}=this.props,{hovered:o}=this.state;return Object(r.jsx)(n.f,{role:"listitem",padding:1,color:o?"lightGray":"white",children:Object(r.jsx)(n.bb,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:t,children:Object(r.jsx)(n.f,{column:12,paddingX:3,paddingY:1,children:Object(r.jsx)(n.cb,{weight:"bold",children:e})})})})}}function c({items:e}){return Object(r.jsx)(n.f,{column:12,paddingY:4,role:"list",children:e.map((e,t)=>Object(r.jsx)(a,{onClick:e.onClick,children:e.children},t))})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/ProfileCover-7f504d0821a389904377.mjs.map